<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filecoin Storage Provider Business Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; background: #f3f4f6; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Load libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script>
        const { useState, createElement: h } = React;

        function FilecoinBusinessPlan() {
          const [storageCapacity, setStorageCapacity] = useState(10);
          const [powerCost, setPowerCost] = useState(0.065);
          const [datacapMultiplier, setDatacapMultiplier] = useState(10);

          // Hardware assumptions
          const storagePerServer = 0.5;
          const serversNeeded = Math.ceil(storageCapacity / storagePerServer);
          const costPerServer = 45000;
          const totalHardwareCost = serversNeeded * costPerServer;

          // Financing assumptions
          const downPayment = 0.20;
          const loanTerm = 36;
          const interestRate = 0.07;
          const monthlyRate = interestRate / 12;
          const loanAmount = totalHardwareCost * (1 - downPayment);
          const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, loanTerm)) / (Math.pow(1 + monthlyRate, loanTerm) - 1);

          // Operational costs
          const powerPerServer = 2.5;
          const totalPowerKw = powerPerServer * serversNeeded;
          const monthlyPowerCost = totalPowerKw * 24 * 30 * powerCost;

          const spacePerServer = 4;
          const rackSpaceNeeded = Math.ceil(serversNeeded * spacePerServer / 42);
          const costPerRackSpace = 350;
          const monthlySpaceCost = rackSpaceNeeded * costPerRackSpace;

          const monthlyBandwidth = 500;
          const monthlyMaintenance = serversNeeded * 100;
          const monthlyInsurance = 400;
          const monthlySalary = 6500;

          const totalMonthlyOpex = monthlyPowerCost + monthlySpaceCost + monthlyBandwidth +
                                   monthlyMaintenance + monthlyInsurance + monthlySalary;

          // Revenue assumptions
          const baseBlockReward = 0.15;
          const datacapBonus = baseBlockReward * datacapMultiplier;
          const totalRewardRate = baseBlockReward + datacapBonus;
          const filPrice = 5.5;
          const usdToCad = 1.38;
          const filPriceCad = filPrice * usdToCad;

          const dailyRevenue = storageCapacity * 1024 * totalRewardRate * filPriceCad;
          const monthlyRevenue = dailyRevenue * 30;

          // Calculate projections
          const months = 48;
          let cumulativeCashFlow = -(totalHardwareCost * downPayment);
          let breakEvenMonth = null;

          for (let month = 1; month <= months; month++) {
            const isFinancing = month <= loanTerm;
            const monthlyCapex = isFinancing ? monthlyPayment : 0;
            const totalMonthlyCost = totalMonthlyOpex + monthlyCapex;
            const monthlyProfit = monthlyRevenue - totalMonthlyCost;
            cumulativeCashFlow += monthlyProfit;

            if (breakEvenMonth === null && cumulativeCashFlow > 0) {
              breakEvenMonth = month;
            }
          }

          const yearlyProfit = monthlyRevenue * 12 - (totalMonthlyOpex * 12) - (monthlyPayment * 12);
          const roi = (yearlyProfit / totalHardwareCost) * 100;

          return h('div', { className: 'w-full max-w-6xl mx-auto p-6 bg-white min-h-screen' },
            h('h1', { className: 'text-3xl font-bold mb-6 text-blue-900' }, 'Filecoin Storage Provider Business Plan'),
            h('p', { className: 'text-lg mb-6 text-gray-700' }, 'Quebec, Canada - Strategic Analysis & Financial Projections'),

            // Configuration
            h('div', { className: 'bg-blue-50 p-6 rounded-lg mb-6' },
              h('h2', { className: 'text-xl font-bold mb-4' }, 'Configuration'),
              h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                h('div', {},
                  h('label', { className: 'block text-sm font-medium mb-2' }, 'Storage Capacity (PiB)'),
                  h('input', {
                    type: 'number',
                    value: storageCapacity,
                    onChange: (e) => setStorageCapacity(Number(e.target.value)),
                    className: 'w-full p-2 border rounded',
                    min: 1,
                    max: 100
                  })
                ),
                h('div', {},
                  h('label', { className: 'block text-sm font-medium mb-2' }, 'Power Cost (CAD/kWh)'),
                  h('input', {
                    type: 'number',
                    value: powerCost,
                    onChange: (e) => setPowerCost(Number(e.target.value)),
                    className: 'w-full p-2 border rounded',
                    step: 0.001,
                    min: 0.03,
                    max: 0.15
                  })
                ),
                h('div', {},
                  h('label', { className: 'block text-sm font-medium mb-2' }, 'Datacap Multiplier'),
                  h('input', {
                    type: 'number',
                    value: datacapMultiplier,
                    onChange: (e) => setDatacapMultiplier(Number(e.target.value)),
                    className: 'w-full p-2 border rounded',
                    min: 1,
                    max: 100
                  })
                )
              )
            ),

            // Executive Summary
            h('div', { className: 'mb-8' },
              h('h2', { className: 'text-2xl font-bold mb-4 text-blue-900' }, 'Executive Summary'),
              h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                h('div', { className: 'bg-green-50 p-4 rounded-lg' },
                  h('div', { className: 'text-sm text-gray-600' }, 'Initial Investment'),
                  h('div', { className: 'text-2xl font-bold text-green-700' },
                    '$' + Math.round(totalHardwareCost * downPayment).toLocaleString() + ' CAD'
                  ),
                  h('div', { className: 'text-xs text-gray-500' }, '20% down payment')
                ),
                h('div', { className: 'bg-blue-50 p-4 rounded-lg' },
                  h('div', { className: 'text-sm text-gray-600' }, 'Monthly Revenue (Steady State)'),
                  h('div', { className: 'text-2xl font-bold text-blue-700' },
                    '$' + Math.round(monthlyRevenue).toLocaleString() + ' CAD'
                  ),
                  h('div', { className: 'text-xs text-gray-500' }, 'With Datacap ' + datacapMultiplier + 'x multiplier')
                ),
                h('div', { className: 'bg-orange-50 p-4 rounded-lg' },
                  h('div', { className: 'text-sm text-gray-600' }, 'Break-Even Point'),
                  h('div', { className: 'text-2xl font-bold text-orange-700' },
                    breakEvenMonth ? breakEvenMonth + ' months' : 'N/A'
                  ),
                  h('div', { className: 'text-xs text-gray-500' }, 'Cumulative cash flow positive')
                ),
                h('div', { className: 'bg-purple-50 p-4 rounded-lg' },
                  h('div', { className: 'text-sm text-gray-600' }, 'Annual ROI (Year 1)'),
                  h('div', { className: 'text-2xl font-bold text-purple-700' },
                    roi.toFixed(1) + '%'
                  ),
                  h('div', { className: 'text-xs text-gray-500' }, 'Based on hardware investment')
                )
              )
            ),

            // Capital Expenditure
            h('div', { className: 'mb-8' },
              h('h2', { className: 'text-2xl font-bold mb-4 text-blue-900' }, 'Capital Expenditure'),
              h('div', { className: 'bg-gray-50 p-4 rounded-lg overflow-x-auto' },
                h('table', { className: 'w-full text-sm' },
                  h('thead', {},
                    h('tr', { className: 'border-b' },
                      h('th', { className: 'text-left py-2' }, 'Item'),
                      h('th', { className: 'text-right py-2' }, 'Quantity'),
                      h('th', { className: 'text-right py-2' }, 'Unit Cost (CAD)'),
                      h('th', { className: 'text-right py-2' }, 'Total (CAD)')
                    )
                  ),
                  h('tbody', {},
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Storage Servers (AMD EPYC, 500TB each)'),
                      h('td', { className: 'text-right' }, serversNeeded),
                      h('td', { className: 'text-right' }, '$' + costPerServer.toLocaleString()),
                      h('td', { className: 'text-right font-bold' }, '$' + totalHardwareCost.toLocaleString())
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Down Payment (20%)'),
                      h('td', { className: 'text-right' }, '-'),
                      h('td', { className: 'text-right' }, '-'),
                      h('td', { className: 'text-right font-bold text-red-600' },
                        '$(' + Math.round(totalHardwareCost * downPayment).toLocaleString() + ')'
                      )
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Financed Amount'),
                      h('td', { className: 'text-right' }, '36 months'),
                      h('td', { className: 'text-right' }, '7% APR'),
                      h('td', { className: 'text-right font-bold' }, '$' + Math.round(loanAmount).toLocaleString())
                    ),
                    h('tr', {},
                      h('td', { className: 'py-2 font-bold' }, 'Monthly Loan Payment'),
                      h('td', { className: 'text-right' }, '-'),
                      h('td', { className: 'text-right' }, '-'),
                      h('td', { className: 'text-right font-bold text-blue-700' },
                        '$' + Math.round(monthlyPayment).toLocaleString() + '/mo'
                      )
                    )
                  )
                )
              )
            ),

            // Monthly Operating Expenses
            h('div', { className: 'mb-8' },
              h('h2', { className: 'text-2xl font-bold mb-4 text-blue-900' }, 'Monthly Operating Expenses'),
              h('div', { className: 'bg-gray-50 p-4 rounded-lg overflow-x-auto' },
                h('table', { className: 'w-full text-sm' },
                  h('thead', {},
                    h('tr', { className: 'border-b' },
                      h('th', { className: 'text-left py-2' }, 'Expense Category'),
                      h('th', { className: 'text-right py-2' }, 'Details'),
                      h('th', { className: 'text-right py-2' }, 'Monthly Cost (CAD)')
                    )
                  ),
                  h('tbody', {},
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Electricity'),
                      h('td', { className: 'text-right' }, totalPowerKw.toFixed(1) + ' kW × $' + powerCost + '/kWh'),
                      h('td', { className: 'text-right' }, '$' + Math.round(monthlyPowerCost).toLocaleString())
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Datacenter Space'),
                      h('td', { className: 'text-right' }, rackSpaceNeeded + ' racks × $350/rack'),
                      h('td', { className: 'text-right' }, '$' + Math.round(monthlySpaceCost).toLocaleString())
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Bandwidth'),
                      h('td', { className: 'text-right' }, '10Gbps unmetered'),
                      h('td', { className: 'text-right' }, '$' + monthlyBandwidth.toLocaleString())
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Maintenance & Spares'),
                      h('td', { className: 'text-right' }, serversNeeded + ' servers × $100'),
                      h('td', { className: 'text-right' }, '$' + Math.round(monthlyMaintenance).toLocaleString())
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Insurance'),
                      h('td', { className: 'text-right' }, 'Equipment & liability'),
                      h('td', { className: 'text-right' }, '$' + monthlyInsurance.toLocaleString())
                    ),
                    h('tr', { className: 'border-b' },
                      h('td', { className: 'py-2' }, 'Personnel'),
                      h('td', { className: 'text-right' }, '1 FTE operator/admin'),
                      h('td', { className: 'text-right' }, '$' + monthlySalary.toLocaleString())
                    ),
                    h('tr', { className: 'font-bold' },
                      h('td', { className: 'py-2' }, 'Total Monthly OPEX'),
                      h('td', { className: 'text-right' }, '-'),
                      h('td', { className: 'text-right text-red-600' }, '$' + Math.round(totalMonthlyOpex).toLocaleString())
                    )
                  )
                )
              )
            ),

            // Revenue Model
            h('div', { className: 'mb-8' },
              h('h2', { className: 'text-2xl font-bold mb-4 text-blue-900' }, 'Revenue Model (with Datacap)'),
              h('div', { className: 'bg-green-50 p-4 rounded-lg mb-4' },
                h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 text-sm' },
                  h('div', {},
                    h('div', { className: 'text-gray-600' }, 'Base Block Rewards'),
                    h('div', { className: 'text-lg' }, baseBlockReward + ' FIL/TiB/day')
                  ),
                  h('div', {},
                    h('div', { className: 'text-gray-600' }, 'Datacap Bonus (' + datacapMultiplier + 'x)'),
                    h('div', { className: 'text-lg' }, datacapBonus.toFixed(2) + ' FIL/TiB/day')
                  ),
                  h('div', {},
                    h('div', { className: 'text-gray-600' }, 'Total Rewards Rate'),
                    h('div', { className: 'text-lg font-bold' }, totalRewardRate.toFixed(2) + ' FIL/TiB/day')
                  ),
                  h('div', {},
                    h('div', { className: 'text-gray-600' }, 'FIL Price'),
                    h('div', { className: 'text-lg' }, '$' + filPrice + ' USD ($' + filPriceCad.toFixed(2) + ' CAD)')
                  )
                )
              ),
              h('div', { className: 'bg-gray-50 p-4 rounded-lg' },
                h('div', { className: 'text-sm text-gray-600 mb-2' }, 'Monthly Revenue Calculation'),
                h('div', { className: 'text-base' },
                  storageCapacity + ' PiB × 1,024 TiB/PiB × ' + totalRewardRate.toFixed(2) +
                  ' FIL/TiB/day × 30 days × $' + filPriceCad.toFixed(2) + ' CAD/FIL'
                ),
                h('div', { className: 'text-2xl font-bold text-green-700 mt-2' },
                  '= $' + Math.round(monthlyRevenue).toLocaleString() + ' CAD/month'
                )
              )
            ),

            // Key Metrics Summary
            h('div', { className: 'bg-gray-100 p-6 rounded-lg mb-8' },
              h('h2', { className: 'text-xl font-bold mb-3' }, 'Key Financial Metrics'),
              h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4 text-sm' },
                h('div', {},
                  h('div', { className: 'font-bold mb-2' }, 'Monthly Cash Flow'),
                  h('div', {}, 'Revenue: $' + Math.round(monthlyRevenue).toLocaleString()),
                  h('div', {}, 'OPEX: $' + Math.round(totalMonthlyOpex).toLocaleString()),
                  h('div', {}, 'Loan Payment: $' + Math.round(monthlyPayment).toLocaleString()),
                  h('div', { className: 'font-bold text-green-700 mt-2' },
                    'Net Profit: $' + Math.round(monthlyRevenue - totalMonthlyOpex - monthlyPayment).toLocaleString()
                  )
                ),
                h('div', {},
                  h('div', { className: 'font-bold mb-2' }, 'Annual Projections'),
                  h('div', {}, 'Annual Revenue: $' + Math.round(monthlyRevenue * 12).toLocaleString()),
                  h('div', {}, 'Annual OPEX: $' + Math.round(totalMonthlyOpex * 12).toLocaleString()),
                  h('div', { className: 'font-bold text-green-700 mt-2' },
                    'Annual Profit: $' + Math.round(yearlyProfit).toLocaleString()
                  )
                ),
                h('div', {},
                  h('div', { className: 'font-bold mb-2' }, 'Investment Returns'),
                  h('div', {}, 'Total Investment: $' + totalHardwareCost.toLocaleString()),
                  h('div', {}, 'Down Payment: $' + Math.round(totalHardwareCost * downPayment).toLocaleString()),
                  h('div', {}, 'Break-even: ' + (breakEvenMonth || 'N/A') + ' months'),
                  h('div', { className: 'font-bold text-green-700 mt-2' }, 'ROI: ' + roi.toFixed(1) + '%')
                )
              )
            ),

            // Key Assumptions
            h('div', { className: 'bg-blue-50 p-6 rounded-lg' },
              h('h2', { className: 'text-xl font-bold mb-3' }, 'Key Assumptions'),
              h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 text-sm' },
                h('ul', { className: 'space-y-1' },
                  h('li', {}, '• FIL price: $5.50 USD stable'),
                  h('li', {}, '• USD/CAD: 1.38 exchange rate'),
                  h('li', {}, '• Datacap multiplier: ' + datacapMultiplier + 'x maintained'),
                  h('li', {}, '• 95% uptime/quality score'),
                  h('li', {}, '• Hardware lifespan: 4-5 years')
                ),
                h('ul', { className: 'space-y-1' },
                  h('li', {}, '• Quebec power: $' + powerCost + '/kWh'),
                  h('li', {}, '• No regulatory changes'),
                  h('li', {}, '• Steady state reached month 3'),
                  h('li', {}, '• No slashing penalties'),
                  h('li', {}, '• 7% financing rate')
                )
              )
            )
          );
        }

        // Render the app
        try {
          const root = ReactDOM.createRoot(document.getElementById('root'));
          root.render(React.createElement(FilecoinBusinessPlan));
          console.log('✅ App loaded successfully!');
        } catch (error) {
          console.error('❌ Error:', error);
          document.getElementById('root').innerHTML = '<div style="padding: 2rem; color: red;">Error loading app. Check console.</div>';
        }
    </script>
</body>
</html>
